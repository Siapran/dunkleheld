<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="15" height="15" tilewidth="16" tileheight="16">
   <tileset firstgid="1" name="tiles" tilewidth="16" tileheight="16">
	  <image source="../../tilesets/tiles.png" width="96" height="144"/>
   </tileset>
   <layer name="Tiles" width="15" height="15">
	  <data>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="4"/>
		 <tile gid="5"/>
		 <tile gid="35"/>
		 <tile gid="5"/>
		 <tile gid="35"/>
		 <tile gid="5"/>
		 <tile gid="35"/>
		 <tile gid="5"/>
		 <tile gid="35"/>
		 <tile gid="5"/>
		 <tile gid="6"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="10"/>
		 <tile gid="11"/>
		 <tile gid="41"/>
		 <tile gid="11"/>
		 <tile gid="41"/>
		 <tile gid="11"/>
		 <tile gid="41"/>
		 <tile gid="11"/>
		 <tile gid="41"/>
		 <tile gid="11"/>
		 <tile gid="12"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="18"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="18"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="18"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="18"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="18"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="45"/>
		 <tile gid="5"/>
		 <tile gid="5"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="51"/>
		 <tile gid="11"/>
		 <tile gid="11"/>
		 <tile gid="4"/>
		 <tile gid="5"/>
		 <tile gid="46"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="10"/>
		 <tile gid="50"/>
		 <tile gid="52"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="33"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="16"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="0"/>
		 <tile gid="39"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="22"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="23"/>
		 <tile gid="24"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
		 <tile gid="8"/>
	  </data>
   </layer>
   <objectgroup name="props" width="0" height="0">
		<prop name="link"	 x="0"	y="144"	width="16"	height="48">
			<destination map="main_hall_phase1" x="224" y="160"/>
		</prop>

		<prop name="switch"	 x="64"   y="160"  width="16"  height="16" id="1"/>
		<prop name="switch"  x="96"   y="160"  width="16"  height="16" id="2"/>
		<prop name="switch"  x="128"  y="160"  width="16"  height="16" id="3"/>
		<prop name="switch"  x="160"  y="160"  width="16"  height="16" id="4"/>

		<prop name="switch"  x="112"  y="32"   width="16"  height="16" id="5">
   		<trigger exp="switch#5:switch_on">
   			<setvar scope="global" target="spikes_hall_off" value="switch#5.state == on" />
   			<description lang="fr">On entend du metal cliqueter au loin ... sûrement un mécanisme.</descripion>
   		</trigger></prop>

   		<examine name="writings" x="16" y="160" width="16" height="16">
   			<description lang="fr">Trouve le bon chemin pour reveler la lumière divine.</descripion>
   		</examine>

   		<!------------------------------------------ spike grid ------------------------------------------>
   		<!-- line 1 -->
   		<prop name="spikes"  x="48"   y="48"   width="16"  height="16" id="11"  state="on"/>
   		<prop name="spikes"  x="64"   y="48"   width="16"  height="16" id="12"  state="on"/>
   		<prop name="spikes"  x="80"   y="48"   width="16"  height="16" id="13"  state="on"/>
   		<prop name="spikes"  x="96"   y="48"   width="16"  height="16" id="14"  state="on"/>
   		<prop name="spikes"  x="112"  y="48"   width="16"  height="16" id="15">
   			<trigger exp="(switch#1.state == on) ^ (switch#2.state == on)">
   				<then>
   					<action target="spikes#15" value="spikes_off" />
   				</then>
   				<else>
   					<action target="spikes#15" value="spikes_on" />
   				</else>
   			</trigger></prop>
		<prop name="spikes"  x="128"  y="48"   width="16"  height="16" id="16"  state="on"/>
		<prop name="spikes"  x="144"  y="48"   width="16"  height="16" id="17"  state="on"/>
		<prop name="spikes"  x="160"  y="48"   width="16"  height="16" id="18"  state="on"/>
		<prop name="spikes"  x="176"  y="48"   width="16"  height="16" id="19"  state="on"/>
		<!-- line 2 -->
		<prop name="spikes"  x="48"   y="64"   width="16"  height="16" id="21"  state="on"/>
		<prop name="spikes"  x="64"   y="64"   width="16"  height="16" id="22">
   				<trigger exp="((switch#4.state == on) ^ (switch#3.state == on))">
   					<then>
   						<action target="spikes#22" value="spikes_on" />
   					</then>
   					<else>
   						<action target="spikes#22" value="spikes_off" />
   					</else>
   				</trigger></prop>
		<prop name="spikes"  x="80"   y="64"   width="16"  height="16" id="23">
   					<trigger exp="switch#2.state == on">
   						<then>
   							<action target="spikes#23" value="spikes_off" />
   						</then>
   						<else>
   							<action target="spikes#23" value="spikes_on" />
   						</else>
   					</trigger></prop>
		<prop name="spikes"  x="96"   y="64"   width="16"  height="16" id="24">
   						<trigger exp="((switch#1.state == on) ^ (switch#2.state == on))">
   							<then>
   								<action target="spikes#24" value="spikes_off" />
   							</then>
   							<else>
   								<action target="spikes#24" value="spikes_on" />
   							</else>
   						</trigger></prop>
		<prop name="spikes"  x="112"  y="64"   width="16"  height="16" id="25">
   							<trigger exp="((switch#1.state == on) ^ (switch#2.state == on))">
   								<then>
   									<action target="spikes#25" value="spikes_off" />
   								</then>
   								<else>
   									<action target="spikes#25" value="spikes_on" />
   								</else>
   							</trigger></prop>
		<prop name="spikes"  x="128"  y="64"   width="16"  height="16" id="26">
   								<trigger exp="switch#4.state == on">
   									<then>
   										<action target="spikes#26" value="spikes_off" />
   									</then>
   									<else>
   										<action target="spikes#26" value="spikes_on" />
   									</else>
   								</trigger></prop>
		<prop name="spikes"  x="144"  y="64"   width="16"  height="16" id="27">
   									<trigger exp="switch#4.state == on">
   										<then>
   											<action target="spikes#27" value="spikes_off" />
   										</then>
   										<else>
   											<action target="spikes#27" value="spikes_on" />
   										</else>
   									</trigger></prop>
		<prop name="spikes"  x="160"  y="64"   width="16"  height="16" id="28"  state="on"/>
		<prop name="spikes"  x="176"  y="64"   width="16"  height="16" id="29"  state="on"/>
		<!-- line 3 -->
		<prop name="spikes"  x="48"   y="80"   width="16"  height="16" id="31"  state="on"/>
		<prop name="spikes"  x="64"   y="80"   width="16"  height="16" id="32">
   										<trigger exp="(switch#1.state == on) ^ (switch#2.state == on)">
   											<then>
   												<action target="spikes#32" value="spikes_off" />
   											</then>
   											<else>
   												<action target="spikes#32" value="spikes_on" />
   											</else>
   										</trigger></prop>
		<prop name="spikes"  x="80"   y="80"   width="16"  height="16" id="33"  state="on"/>
		<prop name="spikes"  x="96"   y="80"   width="16"  height="16" id="34"  state="on"/>
		<prop name="spikes"  x="112"  y="80"   width="16"  height="16" id="35">
   											<trigger exp="((switch#4.state == on) ^ (switch#3.state == on))">
   												<then>
   													<action target="spikes#35" value="spikes_off" />
   												</then>
   												<else>
   													<action target="spikes#35" value="spikes_on" />
   												</else>
   											</trigger></prop>
		<prop name="spikes"  x="128"  y="80"   width="16"  height="16" id="36"  state="on"/>
		<prop name="spikes"  x="144"  y="80"   width="16"  height="16" id="37">
   												<trigger exp="switch#4.state == on">
   													<then>
   														<action target="spikes#37" value="spikes_off" />
   													</then>
   													<else>
   														<action target="spikes#37" value="spikes_on" />
   													</else>
   												</trigger></prop>
		<prop name="spikes"  x="160"  y="80"   width="16"  height="16" id="38"  state="on"/>
		<prop name="spikes"  x="176"  y="80"   width="16"  height="16" id="39"  state="on"/>
		<!-- line 4 -->
		<prop name="spikes"  x="48"   y="96"   width="16"  height="16" id="41"  state="on"/>
		<prop name="spikes"  x="64"   y="96"   width="16"  height="16" id="42">
   													<trigger exp="((switch#1.state == on) ^ (switch#4.state == on))">
   														<then>
   															<action target="spikes#42" value="spikes_off" />
   														</then>
   														<else>
   															<action target="spikes#42" value="spikes_on" />
   														</else>
   													</trigger></prop>
		<prop name="spikes"  x="80"   y="96"   width="16"  height="16" id="43"  state="on"/>
		<prop name="spikes"  x="96"   y="96"   width="16"  height="16" id="44"  state="on"/>
		<prop name="spikes"  x="112"  y="96"   width="16"  height="16" id="45">
   														<trigger exp="((switch#3.state == on) ^ (switch#4.state == on))">
   															<then>
   																<action target="spikes#45" value="spikes_off" />
   															</then>
   															<else>
   																<action target="spikes#45" value="spikes_on" />
   															</else>
   														</trigger></prop>
		<prop name="spikes"  x="128"  y="96"   width="16"  height="16" id="46">
   															<trigger exp="switch#3.state == on">
   																<then>
   																	<action target="spikes#46" value="spikes_off" />
   																</then>
   																<else>
   																	<action target="spikes#46" value="spikes_on" />
   																</else>
   															</trigger></prop>
		<prop name="spikes"  x="144"  y="96"   width="16"  height="16" id="47">
   																<trigger exp="switch#2.state == on">
   																	<then>
   																		<action target="spikes#47" value="spikes_off" />
   																	</then>
   																	<else>
   																		<action target="spikes#47" value="spikes_on" />
   																	</else>
   																</trigger></prop>
		<prop name="spikes"  x="160"  y="96"   width="16"  height="16" id="48"  state="on"/>
		<prop name="spikes"  x="176"  y="96"   width="16"  height="16" id="49"  state="on"/>
		<!-- line 5 -->
		<prop name="spikes"  x="48"   y="112"  width="16"  height="16" id="51"  state="on"/>
		<prop name="spikes"  x="64"   y="112"  width="16"  height="16" id="52">
   																	<trigger exp="switch#2.state == on">
   																		<then>
   																			<action target="spikes#52" value="spikes_off" />
   																		</then>
   																		<else>
   																			<action target="spikes#52" value="spikes_on" />
   																		</else>
   																	</trigger></prop>
		<prop name="spikes"  x="80"   y="112"  width="16"  height="16" id="53">
   																		<trigger exp="switch#2.state == on">
   																			<then>
   																				<action target="spikes#53" value="spikes_off" />
   																			</then>
   																			<else>
   																				<action target="spikes#53" value="spikes_on" />
   																			</else>
   																		</trigger></prop>
		<prop name="spikes"  x="96"   y="112"  width="16"  height="16" id="54"  state="on"/>
		<prop name="spikes"  x="112"  y="112"  width="16"  height="16" id="55"  state="on"/>
		<prop name="spikes"  x="144"  y="112"  width="16"  height="16" id="56"  state="on"/>
		<prop name="spikes"  x="128"  y="112"  width="16"  height="16" id="57">
   																			<trigger exp="(switch#1.state == on) ^ (switch#2.state == on) ^ (switch#4.state == on)">
   																				<then>
   																					<action target="spikes#57" value="spikes_off" />
   																				</then>
   																				<else>
   																					<action target="spikes#57" value="spikes_on" />
   																				</else>
   																			</trigger></prop>
		<prop name="spikes"  x="160"  y="112"  width="16"  height="16" id="58">
   																				<trigger exp="(switch#1.state == on) ^ (switch#4.state == on)">
   																					<then>
   																						<action target="spikes#58" value="spikes_off" />
   																					</then>
   																					<else>
   																						<action target="spikes#58" value="spikes_on" />
   																					</else>
   																				</trigger></prop>
		<prop name="spikes"  x="176"  y="112"  width="16"  height="16" id="59"  state="on"/>
		<!-- line 6 -->
		<prop name="spikes"  x="48"   y="128"  width="16"  height="16" id="61"  state="on"/>
		<prop name="spikes"  x="64"   y="128"  width="16"  height="16" id="62">
   																					<trigger exp="switch#1.state == on">
   																						<then>
   																							<action target="spikes#62" value="spikes_off" />
   																						</then>
   																						<else>
   																							<action target="spikes#62" value="spikes_on" />
   																						</else>
   																					</trigger></prop>
		<prop name="spikes"  x="80"   y="128"  width="16"  height="16" id="63">
   																						<trigger exp="switch#3.state == on">
   																							<then>
   																								<action target="spikes#63" value="spikes_off" />
   																							</then>
   																							<else>
   																								<action target="spikes#63" value="spikes_on" />
   																							</else>
   																						</trigger></prop>
		<prop name="spikes"  x="96"   y="128"  width="16"  height="16" id="64"  state="on"/>
		<prop name="spikes"  x="112"  y="128"  width="16"  height="16" id="65"  state="on"/>
		<prop name="spikes"  x="128"  y="128"  width="16"  height="16" id="66">
   																							<trigger exp="switch#1.state == on">
   																								<then>
   																									<action target="spikes#66" value="spikes_off" />
   																								</then>
   																								<else>
   																									<action target="spikes#66" value="spikes_on" />
   																								</else>
   																							</trigger></prop>
		<prop name="spikes"  x="144"  y="128"  width="16"  height="16" id="67">
   																								<trigger exp="switch#2.state == on">
   																									<then>
   																										<action target="spikes#67" value="spikes_off" />
   																									</then>
   																									<else>
   																										<action target="spikes#67" value="spikes_on" />
   																									</else>
   																								</trigger></prop>
		<prop name="spikes"  x="160"  y="128"  width="16"  height="16" id="68">
   																									<trigger exp="switch#4.state == on">
   																										<then>
   																											<action target="spikes#68" value="spikes_off" />
   																										</then>
   																										<else>
   																											<action target="spikes#68" value="spikes_on" />
   																										</else>
   																									</trigger></prop>
		<prop name="spikes"  x="176"  y="128"  width="16"  height="16" id="69"  state="on"/>
		<!---------------------------------------- spike grid end ---------------------------------------->
		<prop name="cube_big"   x="96"   y="32"   width="16"  height="16" id="1"/>
		<prop name="cube_big"   x="128"  y="32"   width="16"  height="16" id="2"/>
		<prop name="cube_big"   x="16"   y="192"  width="16"  height="16" id="3"/>

		<prop name="cube_small"   x="56"    y="40"   width="8"   height="8"  id="1"/>
		<prop name="cube_small"   x="176"   y="40"   width="8"   height="8"  id="2"/>
		<prop name="cube_small"   x="56"    y="144"  width="8"   height="8"  id="3"/>
		<prop name="cube_small"   x="176"   y="144"  width="8"   height="8"  id="4"/>

		<prop name="pebbles" x="48"   y="144"  width="16"  height="16"/>
		<prop name="pebbles" x="80"   y="176"  width="16"  height="16"/>
		<prop name="pebbles" x="128"  y="192"  width="16"  height="16"/>
		<prop name="pebbles" x="208"  y="144"  width="16"  height="16"/>
		<prop name="pebbles" x="160"  y="32"   width="16"  height="16"/>
		<prop name="pebbles" x="48"   y="32"   width="16"  height="16"/>
	</objectgroup>
</map>