<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="15" height="15" tilewidth="16" tileheight="16">
	<tileset firstgid="1" name="tiles" tilewidth="16" tileheight="16">
		<image source="../../tilesets/tiles.png" width="96" height="144"/>
	</tileset>
	<layer name="Tiles" width="15" height="15">
		<data>
			<tile gid="8"/>
			<tile gid="4"/>
			<tile gid="5"/>
			<tile gid="5"/>
			<tile gid="6"/>
			<tile gid="4"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="6"/>
			<tile gid="4"/>
			<tile gid="5"/>
			<tile gid="5"/>
			<tile gid="6"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="10"/>
			<tile gid="11"/>
			<tile gid="11"/>
			<tile gid="12"/>
			<tile gid="10"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="12"/>
			<tile gid="10"/>
			<tile gid="11"/>
			<tile gid="11"/>
			<tile gid="12"/>
			<tile gid="8"/>
			<tile gid="4"/>
			<tile gid="46"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="45"/>
			<tile gid="46"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="45"/>
			<tile gid="46"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="45"/>
			<tile gid="6"/>
			<tile gid="10"/>
			<tile gid="52"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="51"/>
			<tile gid="52"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="51"/>
			<tile gid="52"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="51"/>
			<tile gid="12"/>
			<tile gid="16"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="18"/>
			<tile gid="22"/>
			<tile gid="23"/>
			<tile gid="34"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="33"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="34"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="33"/>
			<tile gid="23"/>
			<tile gid="24"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="40"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="39"/>
			<tile gid="4"/>
			<tile gid="5"/>
			<tile gid="6"/>
			<tile gid="40"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="39"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="5"/>
			<tile gid="5"/>
			<tile gid="46"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="18"/>
			<tile gid="10"/>
			<tile gid="11"/>
			<tile gid="12"/>
			<tile gid="16"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="45"/>
			<tile gid="5"/>
			<tile gid="5"/>
			<tile gid="11"/>
			<tile gid="11"/>
			<tile gid="52"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="18"/>
			<tile gid="16"/>
			<tile gid="0"/>
			<tile gid="18"/>
			<tile gid="16"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="51"/>
			<tile gid="11"/>
			<tile gid="11"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="45"/>
			<tile gid="46"/>
			<tile gid="0"/>
			<tile gid="45"/>
			<tile gid="46"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="51"/>
			<tile gid="52"/>
			<tile gid="0"/>
			<tile gid="51"/>
			<tile gid="52"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="34"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="33"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="40"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="0"/>
			<tile gid="39"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="22"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="34"/>
			<tile gid="0"/>
			<tile gid="33"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="23"/>
			<tile gid="24"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="40"/>
			<tile gid="0"/>
			<tile gid="39"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
			<tile gid="8"/>
		</data>
	</layer>
	<objectgroup name="props" width="0" height="0">

		<link x="224"	y="144"	width="16"	height="48">
			<trigger exp="!(has_crystal)">
				<then>
					<destination file="main_hall_right_phase2" x1="0" y1="64" x2="0" y2="144"/>
				</then>
			</trigger>
		</link>

		<prop name="door"       x="96"  y="0"   width="48"  height="32" state="close" id="1"/>

		<prop name="pebbles"    x="160" y="192" width="16"  height="16" state="frame1" id="1"/>
		<prop name="pebbles"    x="176" y="112" width="16"  height="16" state="frame3" id="2"/>
		<prop name="pebbles"    x="64"  y="96"  width="16"  height="16" state="frame0" id="3"/>
		<prop name="pebbles"    x="64"  y="176" width="16"  height="16" state="frame2" id="4"/>
		<prop name="pebbles"    x="80"  y="192" width="16"  height="16" state="frame2" id="5"/>
		<prop name="pebbles"    x="176" y="48"  width="16"  height="16" state="frame0" id="6"/>
		<prop name="pebbles"    x="128" y="48"  width="16"  height="16" state="frame3" id="7"/>

		<prop name="spikes"     x="48"  y="112" width="16"  height="16" id="1" state="off"/>
		<prop name="spikes"     x="64"  y="112" width="16"  height="16" id="2" state="off"/>
		<prop name="spikes"     x="80"  y="64"  width="16"  height="16" id="3" state="off"/>
		<prop name="spikes"     x="80"  y="80"  width="16"  height="16" id="4" state="off"/>

		<prop name="spikes"     x="208" y="144" width="16"  height="16" id="5" state="on">
			<trigger exp="!(has_crystal)" id="1">
				<then>
					<action target="spikes#5" value="spikes_off" id="1"/>
				</then>
			</trigger></prop>
		<prop name="spikes"     x="208" y="160" width="16"  height="16" id="6" state="on">
			<trigger exp="!(has_crystal)" id="2">
				<then>
					<action target="spikes#6" value="spikes_off" id="2"/>
				</then>
			</trigger></prop>
		<prop name="spikes"     x="208" y="176" width="16"  height="16" id="7" state="on">
			<trigger exp="!(has_crystal)" id="3">
				<then>
					<action target="spikes#7" value="spikes_off" id="3"/>
				</then>
			</trigger></prop>

		<prop name="chest"      x="32"  y="32"  width="16"  height="16" state="close" id="1">
			<trigger exp="chest:chest_open" id="4">
				<setvar scope="global" target="chest_main_hall" value="chest.state == on" id="1"/>
			</trigger></prop>

		<object name="piedestal" x="112" y="128" width="16" height="16" id="1">
			<trigger exp="used_crystal" id="5">
				<then>
					<action target="piedestal" value="piedestal_blue" id="4"/>
				</then>
				<else>
					<action target="piedestal" value="piedestal_red" id="5"/>
				</else>
			</trigger></prop>
	</objectgroup>
</map>
